(window.o3iv79tz90732goag=window.o3iv79tz90732goag||[]).push([[1],{60:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(248),i=n(9),l=n(247);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(){var e=Object(r.useContext)(i.a),t=e.columns,n=e.data,o=c(Object(r.useState)([]),2),s=o[0],u=o[1];return Object(r.useEffect)((function(){for(var e=[],r={},a=0;a<t.length;a++){var o=t[a];if(!o.hideSummary){var i={title:o.Header,value:0,num:o.num};e.push(i),r[o.id]=i}}for(var l=function(e){var t=n[e];Object.keys(t).forEach((function(e){r[e]&&(r[e].value+=r[e].num?t[e]:1)}))},c=0;c<n.length;c++)l(c);u(e)}),[]),a.a.createElement(l.a,{direction:"horizontal",gap:3,className:"my-3"},s.map((function(e){return a.a.createElement("div",{key:e.title},a.a.createElement("div",{className:"h4 text-info"},e.title),a.a.createElement("div",{className:"lead text-center"},e.value))})))},f=n(269),m=n(270),d=n(249),b=n(73);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var n=[],r=!0,a=!1,o=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{r||null==l.return||l.return()}finally{if(a)throw o}}return n}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=a.a.createContext(),E=function(e){var t,n,o=e.oraItems,i=e.oraItemViewEnabled,l=e.children,c=Object(r.useContext)(b.a),s=c.data,u=c.handlerUrl,f=g(Object(r.useState)(JSON.parse(o)),2),p=f[0],y=f[1],O=g(Object(r.useState)(!1),2),E=O[0],w=O[1],j=g(Object(r.useState)(""),2),C=j[0],S=j[1],k=Object(r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["training","peer","self","waiting","staff","done"],n=[];p.forEach((function(r){var a=0,o=r.id;o in e&&(r=v(v({},r),e[o])).staff_assessment&&(r.staff=r.waiting,r.waiting=0),t.forEach((function(e){r[e]=r[e]||0,a+=r[e]})),r.total=a,n.push(v({},r))})),y(n)})),A=Object(r.useCallback)((function(){var e=u("get_ora2_responses");S(""),m.a.get(e,{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}).then((function(e){k(e.data),w(!1)})).catch((function(){S("List of Open Assessments is unavailable")}))})),x=Object(r.useCallback)((function(e){S(""),m.a.get(e,{headers:{"Content-Type":"application/json;charset=UTF-8","Access-Control-Allow-Origin":"*"}}).then((function(e){var t=$("#ora-display-proxy");t.html(e.data.html),XBlock.initializeBlock($(t).find(".xblock")[0]),w(!0)})).catch((function(){S("Block view is unavailable")}))})),_=Object(r.useCallback)((function(){$("#ora-display-proxy").empty(),A()})),I=null===(t=s.context)||void 0===t?void 0:t.ENHANCED_STAFF_GRADER,T=null===(n=s.context)||void 0===n?void 0:n.ORA_GRADING_MICROFRONTEND_URL;return a.a.createElement(h.Provider,{value:{esgEnabled:I,esgRootUrl:T,oraData:p,oraItemViewEnabled:i,refreshGrid:A,showOraBlock:E,displayOraBlock:x,backToOpenResponsesGrid:_}},C&&a.a.createElement(d.a,{variant:"danger"},C),l)};var w=function(e){var t=e.row,n=e.column,o=Object(r.useContext)(h),i=o.oraItemViewEnabled,l=o.displayOraBlock,c=t.original,s=c.url_base,u=c[n.id]||0;return i?a.a.createElement(f.a,{destination:s,onClick:function(e){e.preventDefault(),l(s)}},u):a.a.createElement("span",null,u)};var j=function(e){var t=e.row,n=e.column,o=Object(r.useContext)(h),i=o.oraItemViewEnabled,l=o.displayOraBlock,c=t.original,s=c.url_base,u=c[n.id]||0,m=c.peer_assessment;return i&&m?a.a.createElement(f.a,{destination:s,onClick:function(e){e.preventDefault(),l(s)}},u):a.a.createElement("span",null,u)};var C=function(e){var t=e.row,n=e.column,o=Object(r.useContext)(h),i=o.oraItemViewEnabled,l=o.esgEnabled,c=o.displayOraBlock,s=t.original,u=s.url_base,m=s[n.id]||0,d=s.staff_assessment,b=s.team_assignment||!l;return i&&d&&b?a.a.createElement(f.a,{destination:u,onClick:function(e){e.preventDefault(),c(u)}},m):a.a.createElement("span",null,m)};var S=function(e){var t=e.row,n=Object(r.useContext)(h),o=n.esgEnabled,i=n.esgRootUrl,l=t.original,c="".concat(i,"/").concat(l.id),s=o?gettext("View and grade responses"):gettext("Demo the new Grading Experience"),u=l.staff_assessment,m=l.team_assignment;return u&&!m?a.a.createElement(f.a,{destination:c,className:"staff-esg-link"},s):null};function k(){var e=Object(r.useContext)(h),t=e.refreshGrid,n=e.oraData,i=e.showOraBlock;return Object(r.useEffect)((function(){return t()}),[]),i?null:a.a.createElement("div",{id:"listing-table"},a.a.createElement(o.a,{isPaginated:!0,initialState:{pageSize:10},isFilterable:!0,isSortable:!0,itemCount:n.length,data:n,columns:[{Header:"Unit Name",accessor:"parent_name"},{Header:"Assessment",accessor:"name",Cell:w},{Header:"Total Responses",accessor:"total",num:!0},{Header:"Training",accessor:"training",num:!0},{Header:"Peer",accessor:"peer",num:!0},{Header:"Self",accessor:"self",num:!0},{Header:"Waiting",accessor:"waiting",num:!0,Cell:j},{Header:"Staff",accessor:"staff",num:!0,Cell:C},{Header:"Final Grade Received",accessor:"done",num:!0},{Header:"Staff Grader",accessor:"staff_grader",hideSummary:!0,Cell:S}]},a.a.createElement(u,null),a.a.createElement("hr",null),a.a.createElement(o.a.Table,null),a.a.createElement(o.a.EmptyTable,{content:"No results found"}),a.a.createElement(o.a.TableFooter,null)))}k.propTypes={};var A=k;var x=function(){var e=Object(r.useContext)(h),t=e.showOraBlock,n=e.backToOpenResponsesGrid;return a.a.createElement("div",{className:"open-response-assessment-item"},t&&a.a.createElement(f.a,{destination:"",onClick:function(e){e.preventDefault(),n()},className:"open-response-assessment-item-breadcrumbs"},"Back to Full List"),a.a.createElement("div",{id:"ora-display-proxy"}))};t.default=function(e){var t=e.ora_item_view_enabled,n=e.ora_items;return a.a.createElement(E,{oraItems:n,oraItemViewEnabled:t},a.a.createElement(x,null),a.a.createElement(A,null))}}}]);